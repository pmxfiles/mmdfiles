改造版full.fx v1.3.1 〜SoftLightHalfLambert〜 by Furia

◆利用規約
　舞力介入Pさまよりfull.fxを流用させていただいています。
　使用に際して、参考元ソース作成者および、私が責任を負わない
　かつ、自己責任のもと使用する場合において上記以外の制限を追加することはありません。

◆必須条件
　セルフシャドーが使えること
　MMEffect 0.22以上
　　※ミップマップ生成に使用。

◆概要
　ハーフランバートシェーダの概念を組み込んでみました。
　通常のシェーダと単純に”置き換えるだけで使えるように”を目指して。

　ついでに今までどおり
　ミップマップと、異方向性フィルタを適用できます。
　適用するだけで、遠くのディテールがアップ＆モアレ軽減する気がします。

　sample.xを読み込んで、エフェクトのon/offを切り替えてみると効果の程が分かり易いかと。

◆特徴
　通常のLambert拡散光表現だと、どんどん彩度が落ちるので
　基本的に、ソフトライト合成で光強度を反映してます。
　ナルティメットなんかで使われてる、高彩度＝乗算　〜　低彩度＝ソフトライト
　という処理で、元の発色を出来るだけ残してます。

　光強度はハーフランバート化しているので
　セルフシャドーの影の中や、ライトと反対側の凹凸ディテールが潰れません。
　（若干暗くなりすぎ感があったので、リムライト入り　※逆光中っぽい効果）

◆使い方
　３つの方法を提案

　１．従来どおりsample.fxをモデルにあわせてリネームして配置する
　２．MMEのGUI上からsample.fxを適用する。
　２'.MMEのGUI上から、サブセットの展開後、適用したいサブセットにだけ適用

　etc...

◆内部仕様
　・ミップマップの生成方法
　　MME v0.22から、レンダリングターゲットなテクスチャもMipmapを生成してくれるようになったので
　　テクスチャ描画前に、バッファにレンダリングすることでMipmapを生成しています。

　・テクスチャ解像度
　　すべて512*512サイズに展開されます。
　　都度生成するので、エフェクト使用に際してのメモリ消費は１枚分より消費しません。

　　512*512以上の解像度のテクスチャが使用されている場合、たぶんディテールが潰れ気味になるかと。

◆その他
　舞力介入Pさまよりfull.fxを流用させていただいています。
　また、MMDにかかわる皆様へ感謝を。

◆履歴
20110209 v1.3.1
シャドーバッファ外の処理をすっかり忘れてたので組み込み。
セルフシャドーOffの場合も、やっつけ対応

20110209 v1.3
※バージョン毎に別物扱いとする事に決定。（ZProt時のα抜きは一時廃止）
HalfLambert処理を追加（セルフシャドーOn必須）
アクセサリ描画をMMD標準に近づけた（セルフシャドーOn必須）

20110109 v1.2
ZProt時TextureAlphaで切り抜きできるように。

20110102 v1.1
加算スフィアマップをrgbのみに制限