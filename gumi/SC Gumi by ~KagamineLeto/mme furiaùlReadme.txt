ノーマルマップ対応版"full.fx" by Furia

◆利用規約
参考元ソースに習い
使用に際して、参考元ソース作成者および、私が責任を負わない
かつ、自己責任のもと使用する場合において制限を追加することはありません。

◆ノーマルマップについて
UVはPMDやxFileのUVをそのまま流用します。
規定では
"NormalMap0.png"
を
読み込む設定になっています。
無いとエラーが吐かれるかと。
ちなみに、複数枚用意する場合は "0" の部分を連番で増やしてくださればよいかと。
標準では0〜9まで、ちょっとした記述の変更で簡単にふやせます。

また、使用する材質を指定する必要があるので
かならずfxFileの中身を参照して
USE_NORMAL_MAP_MATERIALS0
の値を設定してあげましょう。
（規定では0番材質を指定しています。）
使用する枚数と同様に"0"の部分は0〜9まで対応してます。

また、枚数を増やす場合は、内部にもかかれてますが
MAKE_NORMAL_TEX_COUNT
の、値とあわせて変更してください。

・full+NormMap.fx
テクスチャの作り方がネックになりやすいと思いますがー
意外と方法は多々あって、ZBrush等、特化したソフト以外では・・・

写真屋さんのプラグインで、グレースケールハイトマップ（バンプマップ）から
ノーマルマップを生成するプラグインがあります。
GIMPでも同様のもがあります。

・NormalMap.png
ノーマルマップは、大体こんな感じのものです。

◆雑記
モデリング等でお世話になる、グレースケールなバンプマップを
あらかじめプログラム上で使用しやすいように、あらかじめ法線データに直したものがノーマルマップです。

ハイトマップから、法線に変換するには、高さの指標パラメータが必要だったりしますが
法線化してあれば変換済みなので、プログラムの差異によって凸凹加減が異なったりという点が軽減できたりします。
より、デザイナーの意図に近いビジュアルを得やすくするための手法です。

よく、ノーマルマップのほうが凄いと称されるのは、視差マップ（視差遮蔽マップ）だったりします。
ノーマルマップとハイトマップの合わせ技で、高さがあれば、遮られて見えない部分があるはず
という、点を考慮したシェーディング方法です。

◆その他
内部仕様の話ですが、本エフェクトを使うような場合
画質にこだわりがある方と勝手に判断して、ピクセルシェーダで色計算しなおしています。
重いですが、より滑らかな影に。